<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Fate Walkers</title>
    <style>
        body { 
            background-color: #111; 
            color: white; 
            display: flex; 
            flex-direction: column;
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            margin: 0; 
            font-family: 'Arial', sans-serif;
            user-select: none; 
        }
        canvas { border: 2px solid #555; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
        
        #lobby-screen { text-align: center; }
        h1 { font-size: 50px; margin-bottom: 10px; color: #FFD700; text-shadow: 3px 3px 0 #8B4513; letter-spacing: 2px; }
        p { color: #aaa; margin-bottom: 30px; font-size: 18px; }
        
        button#find-match-btn {
            padding: 15px 40px;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            background: linear-gradient(to bottom, #4CAF50, #2E7D32);
            color: white;
            border: none;
            border-radius: 8px;
            transition: transform 0.1s;
            box-shadow: 0 4px #1B5E20;
        }
        button#find-match-btn:active { transform: translateY(4px); box-shadow: 0 0 #1B5E20; }
        button#find-match-btn:disabled { background: #555; color: #888; box-shadow: none; cursor: not-allowed; }

        #char-select-screen { display:none; width: 100%; height: 100vh; background: #222; flex-direction: row; justify-content: center; align-items: center; }
        .player-area { width: 300px; text-align: center; }
        .portrait-box { width: 200px; height: 300px; background: #333; margin: 0 auto; border: 4px solid #555; display: flex; align-items: center; justify-content: center; transition: all 0.3s; }
        <div id="char-select-screen" style="display: none; flex-direction: column; align-items: center;">
    <h2>캐릭터를 선택하세요</h2>
    
    <div id="char-info-box" style="color: white; background: rgba(0,0,0,0.7); padding: 15px; margin: 10px; width: 400px; min-height: 60px; border: 1px solid #fff; border-radius: 5px; text-align: center;">
        캐릭터에 마우스를 올려보세요.
    </div>

    <div id="char-grid" style="display: flex; gap: 10px; margin-bottom: 20px;"></div>
    <button id="lock-in-btn" disabled>선택 확정</button>
</div>
    </style>

    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, set, onValue, update, push, get, child } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        // ▼▼▼▼▼ [중요] 여기에 본인의 Firebase 설정을 넣어야 합니다! ▼▼▼▼▼
const firebaseConfig = {
  apiKey: "AIzaSyCMtMnUbfeeLTSFZJuRhDkv5xoCi2ioS6M",
  authDomain: "fatewalkers-29335.firebaseapp.com",
  databaseURL: "https://fatewalkers-29335-default-rtdb.firebaseio.com",
  projectId: "fatewalkers-29335",
  storageBucket: "fatewalkers-29335.firebasestorage.app",
  messagingSenderId: "343677807456",
  appId: "1:343677807456:web:c2b4a7bde3b9284b5c8c05",
  measurementId: "G-RVRS4BGZD1"
}
        // ▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲

        const app = initializeApp(firebaseConfig);
        window.db = getDatabase(app);
        window.dbRef = ref;
        window.dbSet = set;
        window.dbUpdate = update;
        window.dbPush = push;
        window.dbGet = get;
        window.dbOnValue = onValue;
        
        console.log("Firebase 로드 완료");
    </script>
    
    <script src="MapGenerator.js"></script> 
</head>
<body>
    <div id="lobby-screen">
        <h1>⚔️ Fate Walkers ⚔️</h1>
        <p>운명이 발걸음을 결정하는 전략 대전</p>
        <button id="find-match-btn">매칭 시작 (Find Match)</button>
        <p id="status-msg" style="margin-top: 20px;">버튼을 눌러 운명을 시험하세요.</p>
    </div>

    <div id="char-select-screen">
        <div class="player-area" style="margin-right: 50px;">
            <h2 style="color: #4CAF50;">PLAYER 1</h2>
            <div id="p1-portrait" class="portrait-box"><span style="font-size: 50px; color: #555;">?</span></div>
            <h3 id="p1-name" style="color: white;">Choosing...</h3>
        </div>
        <div style="text-align: center;">
            <h1 style="color: #f0c040; margin-bottom: 20px;">SELECT CHARACTER</h1>
            <div id="char-grid" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;"></div>
            <div style="margin-top: 30px;">
                <button id="lock-in-btn" style="padding: 15px 40px; font-size: 20px; background: #d32f2f; color: white; border: none; font-weight: bold; cursor: pointer; opacity: 0.5;" disabled>LOCK IN</button>
            </div>
        </div>
        <div class="player-area" style="margin-left: 50px;">
            <h2 style="color: #2196F3;">PLAYER 2</h2>
            <div id="p2-portrait" class="portrait-box"><span style="font-size: 50px; color: #555;">?</span></div>
            <h3 id="p2-name" style="color: white;">Waiting...</h3>
        </div>
    </div>

    <div id="game-container" style="display:none;"></div>
    <script src="game.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/3.60.0/phaser.min.js"></script>

    <script src="./firebase-config.js"></script> 

    <script src="./game.js"></script>
</body>
</html>
</body>

</html>

