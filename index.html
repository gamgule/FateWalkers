<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Fate Walkers - SRPG</title>
    <style>
        body { background-color: #1a1a1a; color: white; text-align: center; font-family: sans-serif; }
        #char-info-box { color: #ffca28; background: rgba(0,0,0,0.8); padding: 15px; margin: 10px auto; width: 450px; min-height: 40px; border: 1px solid #444; }
        #lobby-screen, #char-select-screen { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; }
        #char-grid { display: flex; gap: 10px; margin: 20px; }
        #game-container { display: none; margin: 0 auto; border: 2px solid #555; }
        button { padding: 10px 20px; font-size: 18px; cursor: pointer; }
        button:disabled { background: #444; color: #888; }
    </style>
</head>
<body>

    <div id="lobby-screen">
        <h1>Fate Walkers</h1>
        <div id="char-info-box">매칭 시작을 눌러주세요.</div>
        <button id="find-match-btn">매칭 시작</button>
    </div>

    <div id="char-select-screen" style="display: none;">
        <h2>캐릭터 선택</h2>
        <div id="char-grid"></div>
        <button id="lock-in-btn" disabled>선택 확정</button>
    </div>

    <div id="game-container"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/3.60.0/phaser.min.js"></script>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
        import { getDatabase, ref, get, set, update, push, onValue, increment } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-database.js";

        // [여기에 네 파이어베이스 키를 넣으렴]
const firebaseConfig = {
  apiKey: "AIzaSyCMtMnUbfeeLTSFZJuRhDkv5xoCi2ioS6M",
  authDomain: "fatewalkers-29335.firebaseapp.com",
  databaseURL: "https://fatewalkers-29335-default-rtdb.firebaseio.com",
  projectId: "fatewalkers-29335",
  storageBucket: "fatewalkers-29335.firebasestorage.app",
  messagingSenderId: "343677807456",
  appId: "1:343677807456:web:c2b4a7bde3b9284b5c8c05",
  measurementId: "G-RVRS4BGZD1"
};

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // game.js가 쓸 수 있게 전역에 등록
        window.db = db;
        window.dbRef = ref;
        window.dbGet = get;
        window.dbSet = set;
        window.dbUpdate = update;
        window.dbPush = push;
        window.dbOnValue = onValue;
        window.dbIncrement = increment;

        console.log("Firebase initialized and ready.");
    </script>

    <script src="./game.js"></script>
</body>
</html>
